language: python

sudo: true

python:
  - "2.7"

install:
  - pip install robotframework
  - pip install robotframework-selenium2library
  - pip install decorator
  - pip install docutils
  #- sudo dpkg --add-architecture i386
  #- sudo apt-get install mailutils
  #- sudo apt-get -qq install mailutils exim4
  #- gem install s3
  #- "if [[ ${BROWSER} == 'ie' ]]; then pip install ie_only_pkg; fi"

before_script:

  #- "scp -o StrictHostKeyChecking=no"
  - "echo KNOWN_HOSTS > /home/travis/.ssh/known_hosts"
  - "echo KNOWN_HOSTS > /home/travis/.ssh/authorized_keys"
  - "echo SSH_KEY > /home/travis/.ssh/key"
  - "chmod 400 /home/travis/.ssh/key"
  - "chmod 600 /home/travis/.ssh/key"
  - "export DISPLAY=:99.0"
  - "sh -e /etc/init.d/xvfb start"
  #- "sudo apt-get install -qq mailutils"
  #- "sudo apt-get install -qq mutt"
  #- "find / -type f -perm /6000 -exec stat -c "%A %a %n" {} \"

script:
  #- "firefox --version"
  #- "python test/run_tests.py python $BROWSER --noncritical known_issue_-_travisci"
  #- "python demo/rundemo.py python $BROWSER --noncritical known_issue_-_travisci"
  #- pybot -v BROWSER:$BROWSER -v "VALID USER":$TL_USER -v "VALID PASSWD":$TL_PASSWD tests/web/login/
  #- pybot -v BROWSER:$BROWSER -v "VALID USER":$TL_USER -v "VALID PASSWD":$TL_PASSWD tests/web
  #- pybot -v BROWSER:$BROWSER -v "VALID USER":$TL_USER -v "VALID PASSWD":$TL_PASSWD -i controll tests/web
  #- pybot -v BROWSER:$BROWSER -v "VALID USER":$TL_USER -v "VALID PASSWD":$TL_PASSWD tests/web/customFieldMAnagement
  #- pybot -v BROWSER:$BROWSER -v "VALID USER":$TL_USER -v "VALID PASSWD":$TL_PASSWD tests/web/testProjectManagement/createTestProject/deleteProject
  #- pybot -v BROWSER:$BROWSER -v "VALID USER":$TL_USER -v "VALID PASSWD":$TL_PASSWD tests/web/TestPlanManagement/testPlanContent/tp78_update_linked_tc_version.robot
  #- find / -type f -perm /6000 -exec stat -c "%A %a %n" {} \;
  #- pybot -v BROWSER:$BROWSER -v "VALID USER":$TL_USER -v "VALID PASSWD":$TL_PASSWD tests/web/testProjectManagement/createTestProject/modifyProject/tp12_Rename_Test_Project_NO_NAME_CONFLICT.robot

  #- pybot -v BROWSER:$BROWSER -v "VALID USER":$TL_USER -v "VALID PASSWD":$TL_PASSWD tests/web/Layout/tp109_Navigator_tree.robot
   - pybot -v BROWSER:$BROWSER -v "VALID USER":$TL_USER -v "VALID PASSWD":$TL_PASSWD tests/web/czechTestDemo/czechtest_demo.robot


env:
  global:
  #- travis encrypt KNOWN_HOSTS
  #- travis encrypt SSH_KEY=-----BEGIN RSA PRIVATE KEY-----MIIEpAIBAAKCAQEAxd0XRRHgqO3RugglxQVtg+4maHos8OUyyVAzFm+bZOF9ysTgDPkLfQUKfiqtvJZPVixs9qN+AtLg8ZqLx3rYACX8GnQP7MWaEB7/bfOByNOklvOCxtZYMZHa9iLuZmlPytOSeUlhMYf7L432h81S/P7NHM6Nc6XdbyfQ31MBxJVDBupS2FjAD+7Q2Y08GBvd8HTkTYv84kkLiyxPC0EVYOz7aVbrH0WuxyjWh9S9fnYpkZRBzNjhPPkb+GnRT/PADrq0mLvnfgfecsXmY2u6HH1C+8AeP6aUweodNHalPS0rmoOSdUAlUEEZzsrtLBG8pp3oWyLergG1ZgFSnLEEqwIDAQABAoIBAQCwWK6mpppetScY8K4I/R9wWE7vCwUG5p/vAIWn12zd6oMct38g0M5GbLm/XPZfgG/RU+MBpxFmHuDRNHakIX5mE3SvdwXCdxMqjxYEvuTLQqYMy5eg8+TCuUY33UYxDGdLVGnVo2r2pEVhStuQiZUPW2Ef7Y/wpMHIken9QJPwya3NKM5odMK/j3sBuZTYlaRJjulIzsNMNmHuf0qW341arNQnhXyAkLOWBWjJH7ClstdCSEuXOiX1ukuAvB6PT7zQIKb0pJw3dYMN4y9oYqupuGj7MkBpoH2XWo7zCzufZ+I7MeeHG3m9gYLeuvt43eqQ4+Pb7r2j+4oUC5SxzTZBAoGBAOuF6u/rEBr14yDLeUC6p3o+A+fV/W34lVzv3yPhHg7fsUbVovUQRIY0t12XKHIRb/cc97DjBULKcKEnQakFFKeJ6O36ffz7S8jjbOXwixGwrE2RbrJASs46cPRIWaa4+BLRpkOpAsxzadFGIPyy/OmJlTF/yUyTXYLAeTaaPZ2RAoGBANcQ+qMqI2u6tbHJCZVXXEM7kMRDWT7KdC7p+e8sBVOUdtWqaFKP3xX6HCKznA/LyGduFUlqD2Cz8OqwKir1r5OorFVIHxwh7+eCDJYNshX/nPL67YoQaZW0kl5TANqH36RxS5o69mu2lRDw8vcBB7I9Ibpj4W5UEY62uPl5yVB7AoGBAJOicX+M0J6lzYcMJOifWEY3Q4l6yQ67SR1lu3EpNwdJzz1Aw5JsbRfXSa3gB9lg9tdnEBiQZgbVET7jdbQ2XBkdSKaMY5dGCt5VOTj1zKb9ITTKWiJgTMPzPETUaWYqAk8BngBBnGB+ZDFrjVf59rGJrbzGhm963J4OeqzwiHkRAoGAcPnHYA0TvFTBe5orAZt5qQvSWXczm4uIith4Zc6PIb+8yTMSSESxoP7Y5tXJJncbWFH4tq8TUu5ToUVXcWfMitmxZb9UMFgXiVrEt9KL+YhkbzOnsr46aN0JgqlBqopzzhOB7owIxL6OAe9BAsY0v8njPOGZG3boHjsYYl06hp8CgYBJ3ttEP7AjOuwxd1WnjbheBvVAPsZu5HFIvPzAo9U3PplkPxSZQV1p2LsMUoFmrPe6TZy3m15cdLyDHteqYgoMfX7bEZMzYRo4PJnhvKTttfUfECfkpV89MJGoFqsUy6/7e4zyq+DhKc+JWJxMJozjIWcOPt0LpfcKYdTXLiXHug==-----END RSA PRIVATE KEY-----
  #- travis encrypt KNOWN_HOSTS=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDF3RdFEeCo7dG6CCXFBW2D7iZoeizw5TLJUDMWb5tk4X3KxOAM+Qt9BQp+Kq28lk9WLGz2o34C0uDxmovHetgAJfwadA/sxZoQHv9t84HI06SW84LG1lgxkdr2Iu5maU/K05J5SWExh/svjfaHzVL8/s0czo1zpd1vJ9DfUwHElUMG6lLYWMAP7tDZjTwYG93wdORNi/ziSQuLLE8LQRVg7PtpVusfRa7HKNaH1L1+dimRlEHM2OE8+Rv4adFP88AOurSYu+d+B95yxeZja7ocfUL7wB4/ppTB6h00dqU9LSuag5J1QCVQQRnOyu0sEbymnehbIt6uAbVmAVKcsQSr ubuntu@ip-172-31-42-192
  matrix:
  - BROWSER=firefox
  #- BROWSER=ie # will be added later
  #- BROWSER=safari # will be added later





after_script:
   - zip -r build.zip /home/travis/build/marcel-veselka/testlink-qa-robot/*
   #- ssh -v -o StrictHostKeyChecking=no -i /home/travis/.ssh/key ubuntu@testlab.tesena.com -l ubuntu testlab.tesena.com
   #- ssh -v -o "StrictHostKeyChecking no" ubuntu@testlab.tesena.com
   #- ssh -i /home/travis/.ssh/key -o CheckHostIP=no ubuntu@testlab.tesena.com
   #- SSH_AUTH_SOCK=0 ssh -v -i /home/travis/.ssh/key ubuntu@testlab.tesena.com
   - SSH_AUTH_SOCK=0 ssh -v -i SSH_KEY ubuntu@testlab.tesena.com
   #- scp -v -i /home/travis/.ssh/key /home/travis/build/marcel-veselka/testlink-qa-robot/build.zip ubuntu@testlab.tesena.com:/home/ubuntu/reports

   #- mail -s "Pokus" alexandra.kolpakova@tesena.com <<< 'This is the message'
   #- echo "This is the message body" | mail -s "This is the subject" alexandra.kolpakova@tesena.com
   #- mutt -s "Test Email" alexandra.kolpakova@tesena.com < /dev/null
# todo: upload instead of individual files info s3 bucket

addons:
  artifacts:
    bucket: "tesena-s3"
    endpoint: "tesena-s3.s3-website-us-west-2.amazonaws.com"
    s3_region: "us-west-2" # defaults to "us-east-1"

#notifications:
  #email:
   # - alexandra.kolpakova@tesena.com